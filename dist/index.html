
<!-- 
 * index.html
 * This file is part of SyndicateJS
 * @license MIT
 * @author Ryan Joseph (November 2020)
-->

<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Syndicate Tile Rendering (DOS 1993)</title>
	<style>
		body {
			font-family: 'Courier New', Courier, monospace
		}
		.canvas-fixed {
			position: absolute;
			top: 0;
			bottom: 0;
			left: 0;
			right: 0;
			margin:auto;
			border: 1px solid #2d2d2d;
		}
		.canvas-full-screen {
			border: 1px solid #2d2d2d;
		}
		.row {
			display: flex;
		}
	</style>
	<!-- https://github.com/timohausmann/quadtree-js/ -->
	<script src="quadtree.js"></script>
	<script type="module">
		console.log('loaded main script');
		import { SyndicateGame } from './syndicate.js';

		let game = null;
		let canvas = document.getElementById('ctx');
		let context = canvas.getContext('2d');

		var body = document.body,
		    html = document.documentElement;

		canvas.width = html.clientWidth;
		canvas.height = 800;

		function maxLevelChanged(input) {
			console.log('max level changed: '+input.target.value);
			if (game) 
				game.maxLevel = input.target.value;
		}

		function loadMap() {
			let map = document.querySelector('#map');
			let tileset = document.querySelector('#tileset');
			console.log('change map '+map.options[map.selectedIndex].value+' tiles '+tileset.options[tileset.selectedIndex].value);

			if (game) game.unload();

			game = new SyndicateGame(context);
			game.setup('maps/'+map.options[map.selectedIndex].textContent+'.json', tileset.options[tileset.selectedIndex].value);
		}

		document.querySelector('#load-map').addEventListener('click', loadMap);
		document.querySelector('#max-level').addEventListener('input', maxLevelChanged);

		loadMap();
	</script>
</head>
<body>
	<p>Use W,A,S,D keys to scroll map</p>

	<!-- render stats -->
	<div>
		<p id="render-stats">{ render stats }</p>
	</div>

	<!-- game options -->
	<div>
		<div>
			<label>Map:</label>
			<select id="map">
				<option>Western Europe</option>
				<option>Far East</option>
				<option>Mongolia</option>
				<option>Iran</option>
				<option>California</option>
				<option>Iraq</option>
				<option>India</option>
				<option>Northeast Territories</option>
				<option>Kazakhstan</option>
				<option>Eastern Europe</option>
				<option>Western Australia</option>
				<option>Kanchatka</option>
				<option>Mozambique</option>
				<option>Peru</option>
				<option>Central Europe</option>
				<option>Greenland</option>
				<option>Alaska</option>
				<option>Urals</option>
				<option>Northern Territories</option>
				<option>Scandinavia</option>
				<option>Yukon</option>
				<option>Siberia</option>
				<option>Rockies</option>
				<option>Southern States</option>
				<option>Indonesia</option>
				<option>Mexico</option>
				<option>Zaire</option>
				<option>Algeria</option>
				<option>New England</option>
				<option>Argentine</option>
				<option>South Africa</option>
				<option>Colorado</option>
				<option>Sudan</option>
				<option>Mid West</option>
				<option>Lybia</option>
				<option>Venezuela</option>
				<option>Atlantic Accelerator</option>
				<option>Arabia</option>
				<option>Northwest Territories</option>
				<option>Kenya</option>
				<option>Mauritania</option>
				<option>Newfoundland</option>
				<option>New South Wales</option>
				<option>Colombia</option>
				<option>Nigeria</option>
				<option>Brazil</option>
				<option>Uruguay</option>
				<option>Pacific Rim</option>
				<option>Paraguay</option>
				<option>China</option>
			</select>	
		</div>
		<div>
			<label>Tileset:</label>
			<select id="tileset">
				<option value="default">Default</option>
				<option value="tiles_1.png">Tileset 1</option>
				<option value="tiles_2.png">Tileset 2</option>
				<option value="tiles_3.png">Tileset 3</option>
				<option value="tiles_4.png">Tileset 4</option>
			</select>	
		</div>
		<div>
			<label>Max Level:</label>
			<input type="range" min="1" max="12" value="12" class="slider" id="max-level">
		</div>
		<button id="load-map">Load</button>
	</div>
	
	<!-- game canvas -->
	<canvas id="ctx" class="canvas-full-screen" width="512" height="512"></canvas>
</body>
</html>